{"filter":false,"title":"countdown-promotion.js","tooltip":"/charts/countdown-promotion.js","undoManager":{"mark":14,"position":14,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":41}},"text":"var CHART_OPPORTUNITIES = (function($c) {"},{"action":"insertText","range":{"start":{"row":0,"column":41},"end":{"row":1,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":65,"column":0}},"lines":["    ","    var _priv = $c._priv;","    ","    $c.OpportunityTimeline = function(id, data) {  ","        ","        var svg =  dimple.newSvg('#' + id, '100%', '100%');","        var chart = new dimple.chart(svg, data).setMargins(\"140px\", \"30px\", \"40px\", \"120px\");","        ","        var xAxis = chart.addCategoryAxis('x', 'week');","            xAxis.title = 'Week';","            xAxis.addOrderRule('week');","                ","        var yAxis = chart.addCategoryAxis('y', 'name');","            yAxis.title = 'Opportunity';","            yAxis.addOrderRule('week');","             ","        var series = chart.addSeries('type', dimple.plot.bar);     ","               ","        var legend = chart.addLegend(\"50px\", \"-20px\", \"100%\", \"-30px\");         ","                           ","        series.getTooltipText = function (e) {","            return [e.aggField[0] + ' - ' + numeral(e.yValue).format('$0,0')];","        };   ","                ","        chart.draw();","","        function reload(data) { chart.data = data; chart.draw(); }","        function resize() { chart.draw(); }","","        return { reload : reload, resize : resize };              ","                           ","    };","    ","    $c.OpportunitySales = function(id, data) {","        ","        var svg = dimple.newSvg('#' + id, '100%', '100%');","        var chart = new dimple.chart(svg, data).setMargins(\"140px\", \"30px\", \"40px\", \"30px\");","                ","        var xAxis = chart.addCategoryAxis('x', 'month');","            xAxis.title = 'Month';","            xAxis.addOrderRule('month');","                ","        var yAxis = chart.addMeasureAxis('y', 'weeklyValue');","            yAxis.title = 'Monthly Sales';","               ","        var series = chart.addSeries('recordType', dimple.plot.line); ","          ","        var legend = chart.addLegend(\"50px\", \"-20px\", \"100%\", \"-30px\");        ","                       ","        series.getTooltipText = function (e) {","            return [e.aggField[0] + ' - ' + numeral(e.yValue).format('$0,0')];","            };        ","           ","        chart.draw();","                ","        function reload(data) { chart.data = data; chart.draw(); }","        function resize() { chart.draw(); }","","        return { reload : reload, resize : resize };   ","                                    ","    };","    ","    return $c;","    "]},{"action":"insertText","range":{"start":{"row":65,"column":0},"end":{"row":65,"column":10}},"text":"})(CHART);"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":0,"column":10},"end":{"row":0,"column":23}},"text":"OPPORTUNITIES"},{"action":"insertText","range":{"start":{"row":0,"column":10},"end":{"row":0,"column":11}},"text":"C"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":11},"end":{"row":0,"column":12}},"text":"O"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":12},"end":{"row":0,"column":13}},"text":"U"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":13},"end":{"row":0,"column":14}},"text":"N"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":14},"end":{"row":0,"column":15}},"text":"T"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":15},"end":{"row":0,"column":16}},"text":"D"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":16},"end":{"row":0,"column":17}},"text":"O"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":17},"end":{"row":0,"column":18}},"text":"W"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":18},"end":{"row":0,"column":19}},"text":"N"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":61,"column":0},"end":{"row":61,"column":6}},"text":"    };"},{"action":"removeLines","range":{"start":{"row":4,"column":0},"end":{"row":61,"column":0}},"nl":"\n","lines":["    $c.OpportunityTimeline = function(id, data) {  ","        ","        var svg =  dimple.newSvg('#' + id, '100%', '100%');","        var chart = new dimple.chart(svg, data).setMargins(\"140px\", \"30px\", \"40px\", \"120px\");","        ","        var xAxis = chart.addCategoryAxis('x', 'week');","            xAxis.title = 'Week';","            xAxis.addOrderRule('week');","                ","        var yAxis = chart.addCategoryAxis('y', 'name');","            yAxis.title = 'Opportunity';","            yAxis.addOrderRule('week');","             ","        var series = chart.addSeries('type', dimple.plot.bar);     ","               ","        var legend = chart.addLegend(\"50px\", \"-20px\", \"100%\", \"-30px\");         ","                           ","        series.getTooltipText = function (e) {","            return [e.aggField[0] + ' - ' + numeral(e.yValue).format('$0,0')];","        };   ","                ","        chart.draw();","","        function reload(data) { chart.data = data; chart.draw(); }","        function resize() { chart.draw(); }","","        return { reload : reload, resize : resize };              ","                           ","    };","    ","    $c.OpportunitySales = function(id, data) {","        ","        var svg = dimple.newSvg('#' + id, '100%', '100%');","        var chart = new dimple.chart(svg, data).setMargins(\"140px\", \"30px\", \"40px\", \"30px\");","                ","        var xAxis = chart.addCategoryAxis('x', 'month');","            xAxis.title = 'Month';","            xAxis.addOrderRule('month');","                ","        var yAxis = chart.addMeasureAxis('y', 'weeklyValue');","            yAxis.title = 'Monthly Sales';","               ","        var series = chart.addSeries('recordType', dimple.plot.line); ","          ","        var legend = chart.addLegend(\"50px\", \"-20px\", \"100%\", \"-30px\");        ","                       ","        series.getTooltipText = function (e) {","            return [e.aggField[0] + ' - ' + numeral(e.yValue).format('$0,0')];","            };        ","           ","        chart.draw();","                ","        function reload(data) { chart.data = data; chart.draw(); }","        function resize() { chart.draw(); }","","        return { reload : reload, resize : resize };   ","                                    "]},{"action":"insertText","range":{"start":{"row":4,"column":0},"end":{"row":4,"column":57}},"text":"    CountdownLeaderboard = function(id, data, lastWeek) {"},{"action":"insertText","range":{"start":{"row":4,"column":57},"end":{"row":5,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":5,"column":0},"end":{"row":87,"column":0}},"lines":["","        var svg = dimple.newSvg('#' + id, '100%', '100%');","            ","        var chart = new dimple.chart(svg, data).setMargins('60px', '30px', '50px', '40px');","        ","        var xAxis = chart.addMeasureAxis('x', 'value');","            xAxis.title = 'Gross Value (Â£)';","            xAxis.ticks = 5;","            xAxis.tickFormat = '0,f'; ","                        ","        var yAxis = chart.addCategoryAxis('y', 'owner');","            yAxis.title = null;","            yAxis.addOrderRule('value'); ","        ","        var series = chart.addSeries('owner', dimple.plot.bar);","        ","        var targetSeries = chart.addSeries('owner', dimple.plot.line);            ","            var target = !lastWeek ? 20000 : 1540;     ","            var targetData = [{'owner':'Matt K', 'value':target},","                              {'owner':'Phil L', 'value':target},","                              {'owner':'Mark P', 'value':target},","                              {'owner':'Tracy B', 'value':target},","                              {'owner':'Steve G', 'value':target},","                              {'owner':'Steve H', 'value':target},","                              {'owner':'Norrie C', 'value':target},","                              {'owner':'Brian M', 'value':target},","                              {'owner':'Brian R', 'value':target}];            ","            ","        targetSeries.data = targetData;","        ","        series.getTooltipText = function (e) {","            return ['Total Value - ' + numeral(e.cx).format('$0,0')];","        };","        ","        targetSeries.getTooltipText = function (e) {","            return ['Target - ' + numeral(e.cx).format('$0,0')];","        };","        ","        chart.draw();","    ","    };","    ","    CountdownWeeklySales = function() {","","        var svg = dimple.newSvg('#' + id, '100%', '100%');","        var chart = new dimple.chart(svg, data).setMargins(\"80px\", \"30px\", \"40px\", \"120px\");","            ","        var xAxis = chart.addCategoryAxis('x', 'week');","            xAxis.title = xAxisTitle;","            xAxis.addOrderRule('week'); ","        ","        var yAxis = chart.addMeasureAxis(\"y\", \"value\");","            yAxis.title = yAxisTitle;","            yAxis.tickFormat = yAxisTickFormat;","        ","        var series = chart.addSeries(\"owner\", dimple.plot.bar);","            series.stacked = true;               ","        ","        var targetSeries = chart.addSeries('owner', dimple.plot.line);","            var target = 13850; ","            var targetData = [];","             ","            for (var i = 27; i <= 39; i++) {","                targetData.push({'owner': 'Target', 'week' : '2014-W' + i, 'value' : target });","            }","                ","            targetSeries.data = targetData;","                    ","        var legend =  chart.addLegend(\"30px\", \"-20px\", \"100%\", \"-30px\");        ","                           ","        series.getTooltipText = function (e) {","            return [e.aggField[0] + ' - ' + numeral(e.yValue).format('$0,0')];","        }; ","            ","        targetSeries.getTooltipText = function (e) {","            return [e.aggField[0] + ' - ' + numeral(e.yValue).format('$0,0')];","        };  ","        ","        chart.assignColor(\"Target\", \"red\", \"red\", 0.75)    ;   ","          ","        chart.draw();","                "]},{"action":"insertText","range":{"start":{"row":87,"column":0},"end":{"row":87,"column":6}},"text":"    };"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":4,"column":4},"end":{"row":4,"column":5}},"text":"$"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":4,"column":5},"end":{"row":4,"column":6}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":4,"column":6},"end":{"row":4,"column":7}},"text":"."}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":47,"column":4},"end":{"row":47,"column":7}},"text":"$c."}]}]]},"ace":{"folds":[],"scrolltop":1071.5246276855469,"scrollleft":0,"selection":{"start":{"row":2,"column":0},"end":{"row":2,"column":25},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":70,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1407241072204,"hash":"9ec0dee837ca7f5ee9ea85f409f150b6a71bbf8e"}